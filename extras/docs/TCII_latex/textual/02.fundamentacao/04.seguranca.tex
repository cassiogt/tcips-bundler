\section{Segurança em redes}
\label{sec:seguranca}

A segurança no nível de rede indica uma área de pesquisa muito importante, já que os usuários estão continuamente colocando seus dados em ambientes em nuvem e mais dados são transferidos através de grandes distâncias. A razão para esta evolução é a crescente popularidade dos serviços em nuvem, bem como a simplicidade e rápida capacidade dos recursos sob demanda. Os impactos variam de acordo com os tipos de ameaças, e como defesa são criados diversos sistemas de segurança que agem como barreira de proteção, como por exemplo, \textit{firewalls}. Os principais tipos de ameaças serão estudadas a seguir. Também é apresentado um estudo mais detalhado do ataque do tipo varredura, foco deste trabalho.

\subsection{Tipos de ameaças}
Dos diversos tipos de ameaças que podem ocorrer nas redes de computadores, destacam-se algumas que são notórias por causar frequentes transtornos aos usuário, tais como:

\textbf{Fraude}:
Segundo Houaiss, Villar e Francisco (2001)\nocite{Houaiss:2001}, é "qualquer ato ardiloso, enganoso, de má-fé, com intuito de lesar ou ludibriar outrem, ou de não cumprir determinado dever; logro". Esta categoria engloba as notificações de tentativas de fraudes, ou seja, de incidentes em que ocorre uma tentativa de obter vantagem, sejam por meios como correios eletrônicos não solicitados em massa (\textit{spam}) e páginas falsas.
    
\textbf{Ataque de negação de serviço (\textit{\gls{dos}}}:
Um ataque de negação de serviço busca sobrecarregar serviços na rede dificultando o seu uso por usuários legítimos. Esse tipo de ataque, por sua natureza, pode produzir variações no volume de tráfego que normalmente são visíveis no gráfico de fluxo. Segundo Sperotto \textit{et al.} (2010)\nocite{Sperotto:2010} no entanto, na detecção de intrusão por fluxo, é abordado implicitamente o problema de ataques \gls{dos} por força bruta, ou seja, um tipo de \gls{dos} que depende de esgotamento de recursos ou sobrecarga da rede. Infelizmente, é quase impossível de detectar diretamente ataques \gls{dos} semânticas.
    
\textbf{Infestações viróticas automatizadas (\textit{Worms})}:
São pequenos programas de computador criados para causar danos na máquina infectada e se auto replica pela rede, tirando cópias de si em cada computador \cite{Sperotto:2010}.
    
\textbf{Exército de máquinas controladas sem autorização (\textit{Botnets})}:
Grupo de computadores comprometidos, chamados de computadores zumbis que são controlados remotamente por um centro de controle. \textit{Botnets} são muito utilizados para lançamento de ataques  como \textit{spams}, DoS e \textit{worms} \cite{Sperotto:2010}.
    
\textbf{Varredura de portas maliciosa (\textit{port scans})}:
Técnica utilizada para encontrar fraquezas de um computador ou de uma rede. Enquanto esta técnica não é um ataque real, os hackers a usam para detectar quais portas estão abertas em um computador. Baseado nas informações sobre portas abertas, o acesso não autorizado pode ser obtido.

Os métodos citados também podem também ser utilizados em conjunto, como por exemplo a utilização de \textit{botnets} que, controlados remotamente, podem efetuar ataques DoS a um mesmo servidor e ao mesmo tempo. A esse tipo de ataque é dado o nome de Negação de Serviço Distribuída (\gls{ddos})

Do ponto de vista de segurança, existe uma quantidade crescente de incidência de ataques de negação de serviço, \gls{dos}, durante os últimos anos \cite{Seeber:2015}. Além disso, segundo a \gls{cert.br}, responsável por tratar incidentes de segurança e computadores que envolvam redes conectadas à Internet brasileira, foram reportados 722.205 incidências de segurança somente no ano de 2015, sendo mais da metade (53\%), ataques do tipo \textit{port scan}.

\input{textual/02.fundamentacao/04.01.scanning.tex}

\subsection{Ferramentas de Varredura}

Para que as varreduras sejam efetuadas, tem-se a possibilidade de utilizar ferramentas que possibilite a varredura utilizando as diferentes formas citadas na seção anterior. Uma das ferramentas mais utilizadas, e que foi utilizada neste trabalho é o Nmap \cite{Lyon:2009}.

O Nmap é um \textit{software} que oferece uma gama muito grande de recursos e funcionalidades, como detecção do Sistema Operacional remoto, o serviço e a versão que está em uso no host, o exame de ociosidade por identificação (ID) de Internet Protocol (IP), o rápido exame de multiportas por ping entre tantas outras. Possui versões para plataformas Unix, Windows, e MacOS sendo utilizado tanto por interface console como também em interface gráfica, o software Nmap é um utilitário livre e de código aberto, usado para exploração de redes, segurança e auditoria, capaz de examinar grandes redes ou simplesmente um único host.
A função principal do Nmap é realizar uma varredura em portas \gls{tcp} e o retorno dessa varredura é classificado em um dos seguintes estados: aberta, fechada, filtrada, nao filtrada e a combinação de aberta/filtrada ou fechada/filtrada \cite{Lyon:2009}. Vários outros softwares que são utilizados para gerencia e controle de redes de computadores fazem uso do Nmap pois pode ser usado diretamente, sempre que se desejar uma verificação de portas em um \textit{host} que esteja em uma rede local ou na Internet.
O uso mais simples do Nmap é escanear diretamente uma máquina da rede, onde uma quantidade enorme de portas \gls{tcp} será examinada na máquina alvo, e cada porta será classificada de acordo com seu estado.
Na linha de comando do Nmap, tudo que não for uma opção ou argumento de opção será tratado como uma especificação de hospedeiro alvo. O caso mais simples é a especificação de um endereço IP ou nome de hospedeiro alvo para exame \cite{Lyon:2009}.


\subsection{Sistemas de detecção e prevenção de intrusão}

O isolamento da rede em redes virtuais permite uma maior segurança devido ao seu isolamento, porém problemas tradicionais relacionados à segurança continuam existindo em ambientes virtualizados pois 60\% a 70\% dos ataques à segurança da rede são de origem interna segundo Lynch (2006)\nocite{Lynch:2006}. Uma das formas de se proteger desses ataques é monitorar o tráfego em busca de atividades maliciosas ou violação de políticas. Para realizar o monitoramento de pacotes na rede, a solução mais apropriada é o sistema de detecção de intrusão, que realiza o monitoramento passivo dos pacotes na rede. Porém, esse tipo de análise não permite que sejam tomadas ações para prevenir tais ataques, e então faz se necessário um sistema de prevenção de intrusão para bloquear esses pacotes.

Segundo Kruegel (2004)\nocite{Kruegel:2004}, "Detecção de intrusão é o processo de identificar e responder à atividades maliciosas na computação e redes de dados". Uma tentativa de intrusão, também chamada de ataque, refere-se a uma série de ações em que um intruso tenta obter o ganho do sistema e o objetivo de um \gls{ids} é discriminar tentativas de intrusão e preparação de intrusão do uso normal do sistema.

Em redes tradicionais, para detectar e prevenir intrusos maliciosos na rede de dados, administradores normalmente necessitam implantar diversos detectores de intrusão em diferentes locais da rede, e então analisar dados do tráfego coletados localmente ou em um nodo centralizado. Infelizmente, arquiteturas \gls{ids}/\gls{ips} utilizadas atualmente possuem muitas barreiras para gerir nós distribuídos. Em primeiro lugar, os nós de detecção de intrusão devem suportar diferentes configurações. Como as configurações dependem da topologia da rede, configurações manuais e mudanças frequentes são inevitáveis para tornar a política em nós distribuídos eficaz e coerente. Em segundo lugar, algoritmos de detecção de intrusão eficazes normalmente são desenhados para um determinado tipo de ataque. Para desenvolver sistemas de detecção eficazes, mais e mais protocolos de proteção são criados, o que resulta na redução do desempenho da rede. Além disso, dispositivos de rede normalmente possuem protocolos proprietários, o que torna mais difícil desenvolver interfaces de gerenciamento automáticas \cite{Wang:2015}.

Vários trabalhos para \gls{ids} tem sido desenvolvidos desde o início de sua pesquisa nos anos 1980. Essas propostas podem ser classificadas de acordo com várias características, como tipo de dados analisado (\textit{logs} ou dados do pacote), tipo de análise (em tempo real ou \textit{offline}) ou pelo tipo de processamento (centralizado ou distribuído). No entanto, os modelos de classificação mais conhecidos são os baseados em assinatura e os baseados em anomalia \cite{Axelsson:2000}.

Sistemas de detecção de intrusão baseados em assinatura realizam a detecção através da comparação de dados do pacote com uma base de dados conhecida. O \gls{ids} Snort \cite{Roesch:1999} é um dos exemplos mais utilizados dessa técnica, verificando padrões de pacote através da análise de dados da carga útil (\textit{payload}) do pacote. O Snortik \cite{Fagundes16} também é um bom exemplo, neste, é proposto uma integração entre o \gls{ids} Snort e o sistema de \textit{firewall} do sistema MikroTik RouteOS \cite{mikrotik16} com a finalidade de automatizar o processo de reação à ataques. \glspl{ids} baseados em assinatura possuem alta precisão, raramente apresentando alarmes para fluxos normais, porém, não reconhecem fluxos novos, não presentes na sua base de dados. Além disso, a inspeção de pacotes é difícil e até mesmo impossível de ser realizada  em redes com taxas com múltiplos Gigabits por segundo \cite{Lai:2004, Gao:2006}.

Sistemas de detecção de intrusão baseados em anomalia por sua vez, comparam dados recebidos com um "modelo de normalidade" que descreve o comportamento normal da rede. Alterações significativas desse modelo são consideradas como anomalias. Exemplos de criação de comportamentos podem ser redes neurais, técnicas de análise de estatísticas e teoria das probabilidades. A principal vantagem desse tipo de detecção é o fato de também detectar fluxos não conhecidos anteriormente \cite{Owezarski:2010}. No entanto, podem existir casos em que fluxos podem ser diferentes da normalidade esperada mas não necessariamente serem maliciosos resultando em alarmes falsos positivos.

Um \gls{ids} deve ser capaz de lidar com o número crescente do tráfego e ataques na rede. No entanto, alternativas baseadas nas análise de carga útil possuem eficácia em redes entre 100Mbps e 200Mbps \cite{Lai:2004, Gao:2006} podendo chegar a 1Gbps quando hardware dedicado é empregado \cite{Vasiliadis:2008}. Sistemas como Bro \cite{Paxson:1999} e Snort \cite{Roesch:1999} apresentam alto consumo de recursos  quando confrontado com a enorme quantidade de dados de alta taxa de transferência encontrados atualmente \cite{Dreger:2004}. Além disso, protocolos criptografados podem representar um desafio a mais para sistemas de carga útil. Para redes de alta taxas de transmissão, alternativas à inspeção de pacotes são muito importantes. Uma dessas alternativas e que tem atraído pesquisadores é a detecção de intrusão de anomalias baseada em fluxo.

Com esta abordagem, são analisados os padrões de comunicação dentro da rede, ao invés do conteúdo dos pacotes individuais. Hoje em dia os sistemas de medição especiais são capazes de fornecer, para cada par de endereços IP e números de porta, informações agregadas, como a quantidade de bytes transferidos, o número de pacotes enviados e o tempo que determinado fluxo de dados esteve ativo. Essas informações podem então ser exportadas para outros sistemas analisarem, para então, serem usados para detectar intrusões \cite{Sperotto:2010}.

Considerando essa inflexibilidade sobre os equipamentos atuais, os interesses sobre abstrair funções de rede de \textit{switches} dedicados para aplicações \gls{sdn} vem aumentando. Sendo assim, as políticas de segurança podem ser instaladas pelo controlador como regras nas tabelas de fluxo \cite{Kim:2013}, em vez de configurações manuais e independentes. Com isso, o \textit{switch} provê apenas a função de filtro de acordo com a regra na tabela de fluxo, não influenciando significativamente no desempenho da rede. Além disso, \gls{sdn} tem recursos naturais de estatísticas que são úteis para a análise de detecção de intrusão, de modo que o controlador obtém mais visibilidade sobre o tráfego da rede. Portanto, \gls{sdn} parece fornecer uma arquitetura mais adequada para \gls{ips}.